@using TomorrowlandSessionPlanner.Core.Code
@inject PlannerManager PlannerManager
@using MudBlazor
@using TomorrowlandSessionPlanner.Core.Model

<MudDialog>
    <DialogContent>
        <MudExpansionPanels MultiExpansion>
            <MudExpansionPanel>
                <TitleContent>
                    <MudText Align="Align.Center" Typo="Typo.h4">Weekend 1</MudText>
                </TitleContent>
                <ChildContent>
                    <MudTable Bordered Dense Outlined Virtualize
                              Items="@(SupplementSessions.Where(x => x.StartTime >= TomorrowlandTimeData.WeekendOneStartTime && x.StartTime < TomorrowlandTimeData.WeekendTwoStartTime))">
                        <HeaderContent>
                            <MudTh>Stage</MudTh>
                            <MudTh>DJ</MudTh>
                            <MudTh>Start</MudTh>
                            <MudTh>End</MudTh>
                            <MudTh>Action</MudTh>
                        </HeaderContent>
                        <RowTemplate>
                            <MudTd DataLabel="Stage">@PlannerManager.StageList.First(x => x.Id == context.StageId).Name</MudTd>
                            <MudTd DataLabel="DJ">@PlannerManager.DjList.First(x => x.Id == context.DjId).Name</MudTd>
                            <MudTd DataLabel="Start">@context.StartTime</MudTd>
                            <MudTd DataLabel="End">@context.EndTime</MudTd>
                            <MudTd DataLabel="Action">
                                <MudIconButton Icon="@Icons.Material.Filled.Add" Variant="Variant.Text"
                                               Color="Color.Success" OnClick="@(() => AddSessionToUser(context))"/>
                            </MudTd>
                        </RowTemplate>
                    </MudTable>
                </ChildContent>
            </MudExpansionPanel>
            <MudExpansionPanel>
                <TitleContent>
                    <MudText Align="Align.Center" Typo="Typo.h4">Weekend 2</MudText>
                </TitleContent>
                <ChildContent>
                    <MudTable Items="SupplementSessions.Where(x => x.StartTime >= TomorrowlandTimeData.WeekendTwoStartTime)" Bordered
                              Dense Outlined Virtualize>
                        <HeaderContent>
                            <MudTh>Stage</MudTh>
                            <MudTh>DJ</MudTh>
                            <MudTh>Start</MudTh>
                            <MudTh>End</MudTh>
                            <MudTh>Action</MudTh>
                        </HeaderContent>
                        <RowTemplate>
                            <MudTd DataLabel="Stage">@PlannerManager.StageList.First(x => x.Id == context.StageId).Name</MudTd>
                            <MudTd DataLabel="DJ">@PlannerManager.DjList.First(x => x.Id == context.DjId).Name</MudTd>
                            <MudTd DataLabel="Start">@context.StartTime</MudTd>
                            <MudTd DataLabel="End">@context.EndTime</MudTd>
                            <MudTd DataLabel="Action">
                                <MudIconButton Icon="@Icons.Material.Filled.Add" Variant="Variant.Text"
                                               Color="Color.Success" OnClick="@(() => AddSessionToUser(context))"/>
                            </MudTd>
                        </RowTemplate>
                    </MudTable>
                </ChildContent>
            </MudExpansionPanel>
        </MudExpansionPanels>
    </DialogContent>
    <DialogActions>
        <MudButton Variant="Variant.Filled" Color="Color.Error" OnClick="@(() => MudDialog.Close())">Close</MudButton>
    </DialogActions>
</MudDialog>